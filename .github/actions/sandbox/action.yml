name: "Sandbox"
description: "Sandbox Test"
branding:
  icon: "zap"
  color: "gray-dark"
inputs:
  file-content:
    description: File contents
runs:
  using: "composite"
  steps:
    - name: Install fastlane
      shell: bash
      run: |
        curl -fL https://github.com/nitro-build/github-actions-sandbox/releases/download/1.0.0/fastlane.zip > /usr/local/bin/fastlane
        chmod +x /usr/local/bin/fastlane
    - name: Configure Cache
      uses: actions/cache@v2
      with:
        path: |
          ~/.nitro/cache/*
        key: ${{ runner.os }}-nitro-cache-${{ hashFiles('~/.nitro/cache/*') }}
        restore-keys: ${{ runner.os }}-nitro-cache-
    - name: Sample Script
      shell: bash
      run: |
        set -ex

        # create folder if not exists
        mkdir -p ~/.nitro/cache >/dev/null 2>&1

        # list cache folder
        echo "$(ls ~/.nitro/cache)"

        # echo contents
        echo "file content: ${{ inputs.file-content }}"
        file_name=~/.nitro/cache/$(echo ${{ inputs.file-content }} | md5sum | awk '{print $1}').txt

        echo "writing to: ${file_name}"
        echo "${{ inputs.file-content }}" > $file_name

        ls /usr/local/bin
        command -v fastlane
